{"ts":1341119910704,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"jQuery.fn.AdaptiveMenu = function(options){\n\n\tvar options = jQuery.extend({\n\t\ttext:\"Еще...\",\n\t\taccuracy:70,\n\t\t'class':null,\n\t\t'classLinckMore':null\n\t},options);\n\n\tvar menu = this;\n\tvar li = $(menu).find(\"li\");\n\n\tli.css({\"display\":\"inline\",\"white-space\":\"nowrap\"});\n\n\tvar width = 0;\n\tvar widthLi = [];\n\t$.each( li , function(i, l){\n\t\twidth += $(l).width();\n\t\twidthLi.push( width );\n\t});\n\n\tvar buildingMenu = function(windowWidth){\n\t\tvar windowWidth = windowWidth  - options.accuracy;\n\t\tfor(var i = 0; i<widthLi.length; i++ ){\n\t\t\tif ( widthLi[i] > windowWidth )\n\t\t\t\t$( li[i] ).hide();\n\t\t\telse\n\t\t\t\t$( li[i] ).show();\n\t\t}\n\t\t$(menu).find('#more').remove();\n\t\tvar hideLi = $(li).filter(':not(:visible)');\n\t\tvar lastLi = $(li).filter(':visible').last();\n\t\tif ( hideLi.length > 0 ){\n\t\t\tvar more = $(\"<li>\")\n\t\t\t\t.css({\"display\":\"inline-block\",\"white-space\":\"nowrap\"})\n\t\t\t\t.addClass(options.classLinckMore)\n\t\t\t\t.attr({\"id\":\"more\"})\n\t\t\t\t.html(options.text)\n\t\t\t\t.click(function(){$(this).find('li').toggle()});\n\n\t\t\tvar ul =  $(\"<ul>\")\n\t\t\t\t.css({\"position\":\"absolute\"})\n\t\t\t\t.addClass(options.class)\n\t\t\t\t.html(hideLi.clone()).prepend(lastLi.clone().hide());\n\n\t\t\tmore.append(ul);\n\n\t\t\tlastLi.hide().before(more);\n\t\t}\n\t}\n\n\tjQuery(window).resize(function() {\n\t\tbuildingMenu( jQuery(window).width() );\n\t});\n\n\tjQuery(window).ready(function() {\n\t\tbuildingMenu( jQuery(window).width() );\n\t});\n\n};"]],"start1":0,"start2":0,"length1":0,"length2":1374}]],"length":1374}
